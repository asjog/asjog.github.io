<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Learnings &middot; Amod Jog
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  
</head>


  <body class="theme-base-09">

    <div class="sidebar">
  <!--<div class="container sidebar-sticky">-->
    <div class="sidebar-about">
      <center>
        <img src="/images/photo_2015.JPG" alt="" width="420">
      </center>
      <h1>
        <a href="/">
          Amod Jog
        </a>
      </h1>
      <p class="lead">Research Fellow at <a href="https://martinos.org/lab/lcn" target="_blank">Laboratory of Computational Neuroimaging, MGH/HST Athinoula A. Martinos Center for Biomedical Imaging</a></p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>
      <a class="sidebar-nav-item" href="https:/asjog.github.io/pdfs/cv-amod-jog.pdf">CV</a>
      

      
      
        
          
        
      
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/notes/">Notes</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/publications/">Publications</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/research/">Research</a>
          
        
      
      
    </nav>
    <p>&copy; 2017. All rights reserved.</p>
  <!--</div>-->
</div>


    <div class="content container">
      <h2 id="using-tksurfer-for-visualizing-cortical-thicknesses">Using tksurfer for visualizing cortical thicknesses</h2>
<p>I have just started exploring effects of scanner on surfaces and surface thicknesses produced by Freesurfer.
To that end, I needed to learn how to produce surface renderings using tksurfer on an industrial scale.
To do that using tksurfer needed me to write a Tcl script (a language that I did not existed until yesterday).
It is quite a fun language but using it I can generate figures for multiple datasets by the following command:</p>

<pre><code>$&gt; tksurfer fsaverage lh inflated -tcl tksurfer_save_abs_rel_thickness_figs.tcl -curv lh.sulc -colscalebarflag 1
</code></pre>
<p>This calls tksurfer with the tcl script.</p>

<pre><code>The tclscript looks like following:

set base_dir  my_base_dir
set meas some_suffix_i_came_up_with
set out_suffix_lateral _lateral.tiff
set out_suffix_medial _medial.tiff

set overlayflag 1


set colscalebarfig 1

set forcegraycurvatureflag 1
set gaLinkedVars(colscale) 1
foreach scanner { A B C D E F G H } {

	set file_name $base_dir$scanner/$scanner$meas.mgh
	set out_lateral $base_dir$scanner/$scanner$meas$out_suffix_lateral
	set out_medial $base_dir$scanner/$scanner$meas$out_suffix_medial
	puts $file_name
	puts $out_lateral
	puts $out_medial
	set val $file_name
	sclv_read_from_dotw 0

	set gaLinkedVars(fopaqueflag) 0
	set gaLinkedVars(fthresh) 5.0
	set gaLinkedVars(fmid) 20.0
	set gaLinkedVars(fslope) 1
	set gaLinkedVars(truncphaseflag) 1

	SendLinkedVarGroup overlay


	set gaLinkedVars(colscalebarfig) 1
	SendLinkedVarGroup view

	redraw
	set colscalebarfig 1
	redraw

	save_tiff ${out_lateral}
	
	rotate_brain_y 180
	redraw
	save_tiff ${out_medial}
</code></pre>

<p>And I am able to generate figures like below for multiple datasets at a keystroke.
Since I need to generate these figures on a regular basis, it should be worth the 
time it took to learn Tcl and changing the different variables to get the figure
I wanted.</p>

<p>fsaverage brain with thickness differences:
<img src="/images/fsaverage_surf.jpg" alt="alt text" title="fsaverage thickness" /></p>


    </div>

  </body>
</html>
